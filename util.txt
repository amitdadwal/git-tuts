utility function for vrsion3